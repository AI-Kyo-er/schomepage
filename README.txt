# Schomepage主页生成系统 - 用户指南

## 📋 软件简介

Schomepage主页生成系统是一个功能强大的HTML图文文章编辑器工作站，基于Python Flask + JavaScript构建。

### ✨ 主要功能
- 🔐 用户登录注册系统（支持邮箱验证）
- ✍️ 可视化HTML文章编辑器
- 🖼️ 图片素材管理（背景图片、图标库、我的图片）
- 🔗 文章链接功能
- �� **动态内容推送**：通过"动态隐藏模块"功能，可以针对不同类别的访客（如学生、教师、游客等）精确展示或隐藏特定内容模块，实现个性化的信息推送。
- 🌐 访客通道管理
- 📊 **访客统计分析**：跟踪不同访客类型对内容的访问情况，为内容优化提供数据支持。
- 🔑 修改密码功能

## 💻 系统要求

- Windows 10 或 Windows 11
- 至少 2GB 可用磁盘空间
- 网络连接（用于邮件验证功能）

## 🚀 安装步骤

**重要通知：由于近期发现一键安装包 (setup.exe) 存在重大稳定性和安全漏洞，为确保用户数据安全和系统可靠运行，我们决定在当前版本中暂时移除一键安装功能。我们计划在未来的更新中修复此问题并重新提供更完善的安装体验。目前，请您采用以下手动安装和启动方式。对此带来的不便，我们深感抱歉。**

### **当前推荐：手动安装与启动**

1.  **确保您拥有 Python 环境**
    *   如果您的系统中尚未安装 Python (推荐版本 3.7 至 3.13)，请先下载并安装。您可以从 Python 官方网站 (python.org) 获取安装程序。
    *   **重要提示**：在安装 Python 时，请务必勾选"Add Python to PATH"选项，以便在命令行中直接使用 `python` 和 `pip` 命令。
    *   如果您获得了 `python-3.13.4-amd64.exe` 这样的特定安装包，可以直接运行它进行安装。

2.  **安装项目依赖包**
    *   打开命令行终端 (Command Prompt 或 PowerShell)。
    *   导航到 `Schomepage` 项目的 `login` 文件夹。例如，如果项目解压在 `D:\Schomepage_final`，则输入：
        ```cmd
        D:
        cd D:\Schomepage_final\login
        ```
    *   运行以下命令来安装必要的 Python 库：
        ```cmd
        pip install flask flask-cors
        ```
        如果您在执行 `pip` 命令时遇到网络问题，可能需要配置 pip 的国内镜像源。

3.  **启动后端服务器**
    *   在命令行终端中，确保当前路径依然是项目的 `login` 文件夹。
    *   运行以下命令启动后端服务：
        ```cmd
        python server.py
        ```
    *   启动成功后，您应该会看到类似 `* Running on http://127.0.0.1:5000/` 或 `* Running on http://localhost:5000/` 的输出信息。**请保持此命令行窗口开启状态，关闭它将导致后端服务停止。**

4.  **访问系统**
    *   打开您的网页浏览器 (如 Chrome, Firefox, Edge)。
    *   在地址栏输入 `http://localhost:5000` 并按回车键。
    *   现在您应该能看到 Schomepage 的登录界面了。

---
*(以下部分移除了关于 setup.exe 和 schomepage.exe 的描述，并调整了相关说明)*
---

### 方法一：自动安装（推荐）  <- 此方法已移除，请参考上方"当前推荐：手动安装与启动"

**(原自动安装说明已删除)**

### 方法二：快速启动（有Python环境） <- 此方法可能仍部分可用，但推荐完整手动流程

**(原快速启动说明保留，但用户应注意其可能依赖于旧的目录结构或特定脚本，手动启动更为可靠)**
1. **运行快速启动脚本**
   ```
   双击运行 quick_start.bat
   ```
   - 自动检查Python和依赖
   - 自动启动服务器
   - 自动打开浏览器
   **注意：`quick_start.bat` 脚本的有效性取决于您的具体文件包配置，如果遇到问题，请优先使用完整的手动安装与启动步骤。**

### 方法三：手动安装 <- 此方法已整合并提升为主要推荐方法

**(原手动安装说明已整合至上方"当前推荐：手动安装与启动")**

## 🎯 使用方法

### 启动软件

#### **当前推荐启动方式**
1.  **启动后端服务器**：
    ```cmd
    cd path\to\your\Schomepage_final\login
    python server.py
    ```
    *(请确保命令行窗口保持开启)*
2.  **打开浏览器并访问**：`http://localhost:5000`

#### 自动启动（推荐） <- 此方式依赖的 schomepage.exe 已移除
```
双击 schomepage.exe
```
**(原自动启动说明已删除)**


#### 快速启动 （quick_start.bat）
```
双击 quick_start.bat
```
- 自动检查环境并启动
- 自动打开浏览器
**注意：如前所述，请优先考虑完整的手动启动流程的可靠性。**

#### 手动启动
```cmd
cd path\to\your\Schomepage_final\login
python server.py
```
然后在浏览器中访问：http://localhost:5000
**(此部分与当前推荐方式一致)**

### 首次使用

1. **登录系统**
   - 用户名：`admin`
   - 密码：`123456`

2. **注册新账户**
   - 点击"账号注册"
   - 输入邮箱地址
   - 完成邮箱验证
   - 设置密码

### 主要功能使用

#### ✍️ 创建文章
1. 登录后点击"新建文章"
2. 使用工具栏添加文本、图片等元素
3. 点击"保存"保存文章

#### 🖼️ 管理图片
1. 点击左侧"素材库" -> "我的图片"
2. 点击"导入图片"上传自己的图片
3. 在编辑文章时可以插入这些图片

#### 🎭 动态隐藏功能：实现精准内容推送
1. 在编辑文章时，选择任意元素（如文本框、图片模块）。
2. 在右侧的"属性面板"中找到"动态隐藏模块"设置。
3. **设置规则**：
    - **"只给谁看"**：指定该模块仅对某些特定类型的访客可见（例如，校园主页中，某条通知只对"学生"可见）。
    - **"不给谁看"**：指定该模块对某些特定类型的访客隐藏（例如，校园主页中，某个报名入口对"游客"隐藏）。
4. **指定访客类型**：在输入框中填入访客标识，如 `student`, `teacher`, `tourist`, `staff` 等，多个类型用英文逗号隔开。
5. **应用场景示例**：
    - **校园主页**：可以为学生、教师、校友、访客等不同群体推送定制化的新闻、通知、活动信息。例如，选课通知只给学生看，科研动态主要推送给教师。
    - **企业门户**：可以根据员工、客户、合作伙伴等角色显示不同的业务模块或信息。
6. **结合访客统计**：通过分析"访客统计"中各类用户对不同内容的关注度，可以反过来指导"动态隐藏"规则的设置，从而更合理地设计主页信息，提升信息传递的有效性。

#### 🌐 设置访客通道
1. 点击左侧"访客通道"
2. 选择文章并设置别名
3. 访客可通过 http://localhost:5000/别名 访问
4. 支持指定访客类型：http://localhost:5000/别名&user=student

#### 📊 查看访客统计
1. 点击左侧"访客统计"
2. 查看不同类型访客的访问次数
3. 了解文章的受欢迎程度

## ⚙️ 高级设置

### 邮件服务配置
如需修改邮件服务器设置，请编辑 `login/server.py`：
```python
SMTP_SERVER = "smtp.163.com"
SMTP_PORT_SSL = 465
SMTP_USER = "你的邮箱@163.com"
SMTP_PASSWORD = "你的邮箱授权码"
```

### 调试模式
开发者可以在 `login/config.js` 中启用调试模式：
```javascript
const DEBUG_MODE = true;  // 启用调试模式
```

## 🔧 故障排除

### 常见问题

#### 1. 程序无法启动
- **检查Python环境**：确保Python已正确安装且添加到PATH。**可以通过在命令行输入 `python --version` 和 `pip --version` 来验证。**
- **检查依赖安装**：确保 `flask` 和 `flask-cors` 已在正确的Python环境中安装。**可以尝试在 `login` 目录下重新运行 `pip install flask flask-cors`。**
- **检查端口占用**：确保5000端口未被其他程序占用。**如果被占用，您可以在 `login/server.py` 文件中修改 `app.run(host='0.0.0.0', port=5000, debug=False)` 这一行的 `port` 值，例如改为 `5001`，然后通过 `http://localhost:5001` 访问。**
- **检查 `server.py` 是否正确启动**：查看运行 `python server.py` 的命令行窗口是否有报错信息。
- **<s>重新运行安装程序</s>**：<s>运行 setup.exe 重新安装</s> **(此步骤已不适用)**

#### 2. 邮件发送失败
- **检查网络连接**：确保网络畅通
- **检查邮箱设置**：确认SMTP配置正确
- **启用开发模式**：临时跳过邮件验证

#### 3. 文章保存失败
- **检查磁盘空间**：确保有足够的磁盘空间
- **检查文件权限**：确保程序有写入权限

#### 4. 浏览器无法访问
- **检查防火墙**：确保防火墙允许5000端口
- **尝试其他浏览器**：Chrome、Firefox、Edge都支持
- **清除浏览器缓存**：清除缓存后重试

### 获取支持

如果遇到其他问题：
1. 查看服务器控制台的错误信息
2. 按F12打开浏览器开发者工具查看错误
3. 检查系统是否满足最低要求

## 📝 版本信息

- **当前版本**：v2.5
- **更新时间**：2025年6月
- **兼容系统**：Windows 10/11
- **Python版本**：3.7+（推荐3.13）

## 🔒 安全说明

### 密码安全
- 系统采用离散对数端到端加密
- 服务器从不接触明文密码
- 网络传输仅传递16字节加密数据

### 数据安全
- 所有用户数据存储在本地
- 支持定期备份用户文件
- 文件夹权限隔离保护

## 💡 使用技巧

### 1. 高效创建内容
- 使用模板功能快速创建文章结构
- 利用素材库重复使用图片资源
- 设置常用的文本样式作为模板

### 2. 访客管理与内容优化
- **精准定位受众**：为不同类型的访客（如校园场景下的学生、教师、家长、校外访客）创建专门的内容模块或文章。
- **活用动态隐藏**：使用"动态隐藏"功能，针对不同访客群体设置个性化的显示规则，确保他们能看到最相关的信息。例如，将特定讲座信息只推送给"教师"群体，而将社团招新信息主要展示给"学生"。
- **数据驱动决策**：定期查看"访客统计"数据，了解哪些内容更受特定用户群体的欢迎，哪些内容可能未被充分注意到。
- **优化信息结构**：根据访客统计结果，调整"动态隐藏"策略和整体页面布局，优化信息推送的有效性。例如，如果发现"学生"群体对某个"动态隐藏"的就业指导模块访问量很高，可以考虑将其调整为更显眼或默认显示。

### 3. 内容组织
- 使用文章链接功能创建导航结构
- 合理命名文章以便管理
- 定期整理和更新内容

## 📞 技术支持

### 开发者信息
- 软件名称：Schomepage主页生成系统
- 开发团队：Schomepage开发组
- 更新时间：2025年6月

### 反馈建议
如有使用问题或改进建议，欢迎反馈。

## 📁 文件说明

### 主要文件
- **<s>setup.exe</s>** - <s>自动安装程序（推荐使用）</s> **(已移除)**
- **<s>schomepage.exe</s>** - <s>主程序（安装后生成）</s> **(已移除)**
- **quick_start.bat** - 快速启动脚本 (请注意其使用前提)
- **python-3.13.4-amd64.exe** - Python运行环境 (如果提供)
- **login/** - 完整的项目源码 (包含 `server.py` 等核心文件)

### 可选文件 (通常供开发者参考)
- **setup.py** - <s>安装程序源码</s> **(相关功能已暂停)**
- **build_setup.bat** - <s>构建安装程序的脚本</s> **(相关功能已暂停)**
- **schomepage_launcher.py** - <s>启动器源码</s> **(相关功能已暂停)**

### 安装后生成
- **<s>schomepage.exe</s>** - <s>主程序可执行文件</s> **(已移除)**
- **README.txt** - 用户指南（本文件）

## 🎮 快速开始指南

### 5分钟快速体验：

1.  **安装与启动软件 (手动)**
    *   确保Python环境就绪，并已安装 `flask` 和 `flask-cors`。
    *   打开命令行，进入 `login` 目录，运行 `python server.py`。
    *   打开浏览器，访问 `http://localhost:5000`。
    ```
    (详见上方"当前推荐：手动安装与启动"部分)
    ```

2.  **<s>启动程序</s>**
    ```
    (此步骤已包含在上方)
    ```

3.  **登录系统**
    ```
    用户名: admin
    密码: 123456
    ```

4.  **创建第一篇文章**
    ```
    点击"新建文章" → 输入内容 → 点击"保存"
    ```

5.  **设置访客通道**
    ```
    点击"访客通道" → 设置别名 → 分享链接
    ```

### 30分钟完整体验：

1.  **手动安装并启动系统** (参照详细步骤)
2.  **注册个人账户**（使用真实邮箱）
3.  **上传个人图片**（建立素材库）
4.  **创建多篇文章**（体验编辑功能）
5.  **设置动态隐藏**（针对不同访客）
6.  **配置访客通道**（生成分享链接）
7.  **查看访客统计**（了解访问情况）

---

🎉 **感谢使用Schomepage主页生成系统！祝您使用愉快！**

*最后更新：2025年6月*
